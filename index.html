<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Photo Menu - Compact</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: #f0f4f8;
      padding: 15px 10px;
      margin: 0 auto;
      max-width: 600px;
      color: #333;
      font-size: 14px;
    }

    h1.main-title {
      text-align: center;
      color: #2a7b2a;
      margin-bottom: 5px;
      font-weight: 900;
      font-size: 1.8rem;
      letter-spacing: 1px;
    }

    h2.sub-title {
      text-align: center;
      color: #2a7b2a;
      margin-bottom: 20px;
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: 0.5px;
    }

.menu-item {
  display: flex;
  align-items: stretch;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  margin-bottom: 15px;
  padding: 10px;
  min-height: 160px; /* 🔥 This line matters */
}

.img-wrapper {
  width: 130px;
  margin-right: 15px;
  flex-shrink: 0;
  height: 100%;
  display: flex;
}

.img-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 6px;
  display: block;
}


  .menu-item-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
}


    .menu-item-title {
      font-size: 1rem;
      font-weight: 700;
      color: #1b4d1b;
      margin-bottom: 4px;
    }

    .menu-item-desc {
      font-size: 0.85rem;
      color: #555;
      margin: 4px 0 8px;
      margin-bottom: 6px;
    }

    .menu-item-price {
      font-weight: 700;
      color: #2a7b2a;
      font-size: 1rem;
      margin-bottom: 8px;
    }

    .menu-item-price::before {
      content: "₹";
      margin-right: 3px;
    }

    .add-btn {
      background-color: #2a7b2a;
      color: white;
      border: none;
      padding: 7px 12px;
      font-size: 0.9rem;
      border-radius: 6px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .add-btn:hover {
      background-color: #1b4d1b;
      transform: scale(1.05);
    }

    .quantity-wrapper {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 10px;
    }

    .quantity-input {
      width: 45px;
      padding: 5px;
      font-size: 1rem;
      text-align: center;
    }

    .qty-btn {
      width: 32px;
      height: 32px;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 50%;
      border: none;
      color: white;
      cursor: pointer;
    }

    .qty-btn.plus {
      background-color: #2a7b2a;
    }

    .qty-btn.minus {
      background-color: #d9534f;
    }

    #cart-preview {
      background: #ffffff;
      padding: 15px 20px;
      border-radius: 8px;
      margin-top: 25px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      font-size: 1rem;
      color: #2a7b2a;
    }

    #cart-preview h3 {
      margin-top: 0;
    }

    #cart-button, #payWithUpi1, #doneButton, #telegram-button {
      margin-top: 20px;
      padding: 12px 0;
      background-color: #2a7b2a;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      cursor: pointer;
      width: 100%;
      font-weight: 700;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    #doneButton {
      background-color: #ff4500;
    }
    #telegram-button {
    background-color: #006699;  
    }

    #cart-button:hover,
    #payWithUpi1:hover,
    #doneButton:hover, 
    #telegram-button:hover {
      transform: scale(1.05);
    }
    

    .upi-section {
      margin-top: 35px;
      padding: 10px;
      background: #e6ffe6;
      border-radius: 10px;
      text-align: center;
      font-weight: 700;
      color: #2a7b2a;
    }

    .upi-section a {
      display: inline-block;
      margin-top: 10px;
      padding: 10px 16px;
      background-color: #2a7b2a;
      color: white;
      text-decoration: none;
      border-radius: 10px;
      font-weight: 700;
    }

    #qr-section {
      margin-top: 30px;
      text-align: center;
      display: none;
    }

   @media screen and (max-width: 600px) {
  .img-wrapper {
    width: 100px;
    margin-right: 10px;
  }

  .img-wrapper img {
    width: 100%;
    height: auto;
    object-fit: cover;
  }
}

  #resetBtn {
  position: absolute;
  top: 5px;
  left: 5px;
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background-color: #d9534f;
  color: white;
  font-size: 1.1rem;
  font-weight: bold;
  border: none;
  cursor: pointer;
  opacity: 0.2;
  transition: opacity 0.3s ease;
  z-index: 10;
}

#resetBtn:hover {
  opacity: 1;
}
.row-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 10px;
}

.row-actions .quantity-wrapper {
  margin-bottom: 0;
}

.add-btn {
  margin-left: auto;
  padding: 6px 12px;
}
.img-slider-wrapper {
  position: relative;
  width: 120px;
  height: 100%;
  overflow: hidden;
  margin-right: 15px;
  border-radius: 6px;
  flex-shrink: 0;
  display: flex;
  align-items: stretch;
}

.img-slider img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 6px;
}

.img-slider {
  display: flex;
  transition: transform 0.4s ease;
}



.slider-buttons {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 5px;
}

.slider-buttons button {
  background: rgba(0,0,0,0.5);
  color: white;
  border: none;
  padding: 2px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

/* Responsive fix for slider image on mobile */
@media screen and (max-width: 600px) {
  .img-slider-wrapper {
    width: 100px;
    height: 100px;
  }

  .img-slider img {
    height: 100%;
  }
}

  .slider-buttons {
    bottom: 2px;
    gap: 2px;
  }

  .slider-buttons button {
    padding: 1px 6px;
    font-size: 12px;
  }

  .menu-item {
    align-items: flex-start;
  }
}


  </style>
</head>
<body>
    <div style="position: relative;">
  <button onclick="resetOrderCounter()" id="resetBtn" title="Reset Order Counter">↺</button>
</div>
<h2 class="sub-title">Our Menu</h2>

<!-- Example Item -->
<!-- This is the updated part for all 5 menu items -->

<div class="menu-item">
  <div class="img-slider-wrapper">
    <div class="img-slider" id="slider-combo">
      <img src="https://i.ibb.co/LD0mqC4X/IMG-20250716-200459.jpg" alt="Pesto Sandwich" />
      <img src="https://i.ibb.co/SXTpt7M8/IMG-20250716-200421.jpg" alt="Monaco Plate" />
    </div>
    <div class="slider-buttons">
      <button onclick="slidePrev('slider-combo')">⟨</button>
      <button onclick="slideNext('slider-combo')">⟩</button>
    </div>
  </div>
  <div class="menu-item-details">
    <div class="menu-item-title">Combo: Pesto + Monaco</div>
    <div class="menu-item-desc">Enjoy both Pesto Sandwich and Monaco in a single combo meal.</div>
    <div class="menu-item-price">50</div>
    <div class="row-actions">
      <div class="quantity-wrapper">
        <button class="qty-btn minus" onclick="decrementQty('qty-combo')">−</button>
        <input type="number" min="0" value="0" class="quantity-input" id="qty-combo" />
        <button class="qty-btn plus" onclick="incrementQty('qty-combo')">+</button>
      </div>
      <button class="add-btn" onclick="addToCart('Combo: Pesto + Monaco', 50, 'qty-combo')">Add to Cart</button>
    </div>
  </div>
</div>


<div class="menu-item">
  <div class="img-wrapper">
    <img src="https://i.ibb.co/LD0mqC4X/IMG-20250716-200459.jpg" alt="Full Pesto Sandwich" />
  </div>
  <div class="menu-item-details">
    <div class="menu-item-title">Full Pesto Sandwich</div>
    <div class="menu-item-desc">Delicious Pesto Sandwich with creamy sauce and herbs.</div>
    <div class="menu-item-price">50</div>
    <div class="row-actions">
      <div class="quantity-wrapper">
        <button class="qty-btn minus" onclick="decrementQty('qty-0')">−</button>
        <input type="number" min="0" value="0" class="quantity-input" id="qty-0" />
        <button class="qty-btn plus" onclick="incrementQty('qty-0')">+</button>
      </div>
      <button class="add-btn" onclick="addToCart('Full Pesto Sandwich', 50, 'qty-0')">Add to cart</button>
    </div>
  </div>
</div>


 <div class="menu-item">
  <div class="img-wrapper">
  <img src="https://i.ibb.co/LD0mqC4X/IMG-20250716-200459.jpg" alt="Half Pesto Sandwich" />
  </div>
  <div class="menu-item-details">
    <div class="menu-item-title">Half Pesto Sandwich</div>
    <div class="menu-item-desc">A lighter portion of our delicious pesto sandwich, perfect for a quick bite.</div>
    <div class="menu-item-price">30</div>
    <div class="row-actions">
    <div class="quantity-wrapper">
      <button class="qty-btn minus" onclick="decrementQty('qty-4')">−</button>
      <input type="number" min="0" value="0" class="quantity-input" id="qty-4" />
      <button class="qty-btn plus" onclick="incrementQty('qty-4')">+</button>
    </div>
    <button class="add-btn" onclick="addToCart('Half Pesto Sandwich', 30, 'qty-4')">Add to Cart</button>
  </div>
  </div>
</div><div class="menu-item">
   <div class="img-wrapper">
  <img src="https://i.ibb.co/SXTpt7M8/IMG-20250716-200421.jpg" alt="Full Plate Monaco" />
   </div>
  <div class="menu-item-details">
    <div class="menu-item-title">Full Plate Monaco</div>
    <div class="menu-item-desc">Biscuit base paired with fresh, flavorful toppings</div>
    <div class="menu-item-price">50</div>
    <div class="row-actions">
    <div class="quantity-wrapper">
      <button class="qty-btn minus" onclick="decrementQty('qty-1')">−</button>
      <input type="number" min="0" value="0" class="quantity-input" id="qty-1" />
      <button class="qty-btn plus" onclick="incrementQty('qty-1')">+</button>
    </div>
    <button class="add-btn" onclick="addToCart('Full Plate Monaco', 50, 'qty-1')">Add to Cart</button>
  </div>
  </div>
</div><div class="menu-item">
  <div class="img-wrapper">
  <img src="https://i.ibb.co/SXTpt7M8/IMG-20250716-200421.jpg" alt="Half Plate Monaco" />
  </div>
  <div class="menu-item-details">
    <div class="menu-item-title">Half Plate Monaco</div>
    <div class="menu-item-desc">Smaller portion of Monaco biscuit canapes, perfect for a light snack.</div>
    <div class="menu-item-price">25</div>
    <div class="row-actions">
    <div class="quantity-wrapper">
      <button class="qty-btn minus" onclick="decrementQty('qty-3')">−</button>
      <input type="number" min="0" value="0" class="quantity-input" id="qty-3" />
      <button class="qty-btn plus" onclick="incrementQty('qty-3')">+</button>
    </div>
    <button class="add-btn" onclick="addToCart('Half Plate Monaco', 25, 'qty-3')">Add to Cart</button>
  </div>
  </div>
</div><div class="menu-item">
  <div class="img-wrapper">
  <img src="https://i.ibb.co/wh0wYGZL/IMG-20250716-200433.jpg" alt="1 Glass Kokum Juice" />
  </div>
  <div class="menu-item-details">
    <div class="menu-item-title">1 Glass Kokum Juice</div>
    <div class="menu-item-desc">Refresh Your Senses with the Tangy Sweetness of Kokum Sharbat!</div>
    <div class="menu-item-price">15</div>
    <div class="row-actions">
    <div class="quantity-wrapper">
      <button class="qty-btn minus" onclick="decrementQty('qty-2')">−</button>
      <input type="number" min="0" value="0" class="quantity-input" id="qty-2" />
      <button class="qty-btn plus" onclick="incrementQty('qty-2')">+</button>
    </div>
    <button class="add-btn" onclick="addToCart('1 Glass Kokum Juice', 15, 'qty-2')">Add to Cart</button>
  </div>
</div>
</div>



<!-- Add other items by duplicating the block above and changing names, prices, and qty-ID -->

<div id="cart-preview">
  <p>Your cart is empty.</p>
</div>
<div id="order-number-display" style="text-align:center; font-weight:bold; color:#2a7b2a; margin-top: 15px;"></div>

<input type="text" id="custName" placeholder="Your Name (Optional)" 
style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; margin: 15px 0; font-size: 1rem;" />
<button id="cart-button" onclick="sendOrderToWhatsApp()">Send Order via WhatsApp</button>
<button id="telegram-button" onclick="sendOrderToTelegram()" style="...">Send Order to Telegram</button>
<div class="upi-section">
 <!-- Pay via UPI:<br />
  <a id="upiPayLink" href="upi://pay?pa=jevishvyas.ele17d-1@okhdfcbank&pn=Jevish%20Vyas" target="_blank">
    Pay to jevishvyas.ele17d-1@okhdfcbank
  </a> -->
</div>

<button id="payWithUpi1">Pay with UPI</button>

<div id="qr-section">
  <h3>Scan to Pay via UPI</h3>
  <div id="qrcode"></div>
  <div id="qr-amount"></div>
</div>

<button id="doneButton">Payment Done</button>

<script>
let cart = [];

function addToCart(itemName, price, qtyId) {
  const qty = parseInt(document.getElementById(qtyId).value);
  if (isNaN(qty) || qty < 1) return;

  const existing = cart.find(item => item.item === itemName);
  if (existing) {
    existing.qty = qty;
  } else {
    cart.push({ item: itemName, price: price, qty: qty });
  }

  updateCartPreview();
  alert(qty + " x " + itemName + " added to cart!");
}

function updateCartPreview() {
  const cartDiv = document.getElementById('cart-preview');
  if (cart.length === 0) {
    cartDiv.innerHTML = '<p>Your cart is empty.</p>';
    return;
  }

  let html = '<h3>Cart Preview</h3><ul>';
  let total = 0;

  cart.forEach(item => {
    html += `<li>${item.qty} x ${item.item} - ₹${item.qty * item.price}</li>`;
    total += item.qty * item.price;
  });

  html += `</ul><strong>Total: ₹${total}</strong>`;
  cartDiv.innerHTML = html;
}

function sendOrderToWhatsApp() {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  // Order number logic
  let orderNumber = localStorage.getItem('orderNumber');
  if (orderNumber === null) {
    orderNumber = 0;
  } else {
    orderNumber = parseInt(orderNumber);
    orderNumber = (orderNumber >= 1000) ? 0 : orderNumber + 1;
  }
  localStorage.setItem('orderNumber', orderNumber);

  // Get user name
  const name = document.getElementById("custName").value.trim();

  // Build WhatsApp message
  let message = "";
  if (name !== "") {
    message += `👤Name: ${name}\n`;
  }
  message += `📝 Order #${orderNumber}\n\n`;

  let total = 0;
  cart.forEach((item, index) => {
    message += `${index + 1}. ${item.qty} x ${item.item} - ₹${item.qty * item.price}\n`;
    total += item.qty * item.price;
  });

  message += `\n ☘️Total: ₹${total}`;
  document.getElementById("order-number-display").innerText = `Order #${orderNumber} placed`;

  const phoneNumber = "917048107771";
  const encodedMessage = encodeURIComponent(message);
  const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
  window.open(whatsappURL, '_blank');
}

function incrementQty(qtyId) {
  const input = document.getElementById(qtyId);
  let currentVal = parseInt(input.value) || 0;
  const newQty = currentVal + 1;
  input.value = newQty;

  // Update cart if item already exists
  const itemName = getItemNameFromQtyId(qtyId);
  const item = cart.find(c => c.item === itemName);
  if (item) {
    item.qty = newQty;
    updateCartPreview(); // 🟢 Update preview instantly
  }
}


function decrementQty(qtyId) {
  const input = document.getElementById(qtyId);
  let currentVal = parseInt(input.value) || 0;

  if (currentVal > 0) {
    const newQty = currentVal - 1;
    input.value = newQty;

    // 🧠 Now update cart if this item exists
    const itemName = getItemNameFromQtyId(qtyId);
    const item = cart.find(c => c.item === itemName);
    if (item) {
      if (newQty === 0) {
        // Remove from cart
        cart = cart.filter(c => c.item !== itemName);
      } else {
        // Just update quantity
        item.qty = newQty;
      }
      updateCartPreview(); // 🔁 update UI
    }
  }
}


function showUpiQr() {
  const total = cart.reduce((sum, item) => sum + item.qty * item.price, 0);
  if (total === 0) {
    alert("Your cart is empty!");
    return;
  }

  const upiId = 'jevishvyas.ele17d-1@okhdfcbank';
  const name = 'Jevish Vyas';
  const upiUri = `upi://pay?pa=${encodeURIComponent(upiId)}&pn=${encodeURIComponent(name)}&am=${total}&cu=INR`;

  document.getElementById('qr-section').style.display = 'block';
  document.getElementById('qr-amount').innerText = `Amount: ₹${total}`;
  document.getElementById('qrcode').innerHTML = '';
  new QRCode(document.getElementById('qrcode'), {
    text: upiUri,
    width: 180,
    height: 180,
    colorDark: "#000000",
    colorLight: "#ffffff",
    correctLevel: QRCode.CorrectLevel.H
  });
}

document.getElementById('payWithUpi1').addEventListener('click', showUpiQr);

document.getElementById('doneButton').addEventListener('click', function () {
  cart = [];
  document.querySelectorAll('.quantity-input').forEach(input => input.value = 0);
  updateCartPreview();
document.getElementById("custName").value = ""; document.getElementById("order-number-display").innerText =
  `Order #${localStorage.getItem('orderNumber')} placed`;
  // 👇 This runs when page loads, and shows last order number
window.addEventListener('DOMContentLoaded', () => {
  const savedOrderNumber = localStorage.getItem('orderNumber');
  if (savedOrderNumber !== null) {
    document.getElementById("order-number-display").innerText =
      `Last Order #${savedOrderNumber} placed`;
  }
});
});
function resetOrderCounter() {
  localStorage.setItem('orderNumber', 0);
  document.getElementById("order-number-display").innerText = "Order number reset!";
  alert("Order counter has been reset to 0.");
}

let sliderIndex = {};

function slideNext(id) {
  const slider = document.getElementById(id);
  if (!sliderIndex[id]) sliderIndex[id] = 0;
  const maxSlides = slider.children.length;
  sliderIndex[id] = (sliderIndex[id] + 1) % maxSlides;
  slider.style.transform = `translateX(-${sliderIndex[id] * 120}px)`;
}

function slidePrev(id) {
  const slider = document.getElementById(id);
  if (!sliderIndex[id]) sliderIndex[id] = 0;
  const maxSlides = slider.children.length;
  sliderIndex[id] = (sliderIndex[id] - 1 + maxSlides) % maxSlides;
  slider.style.transform = `translateX(-${sliderIndex[id] * 120}px)`;
}

function getItemNameFromQtyId(qtyId) {
  // Match the ID with the correct item name from DOM
  const input = document.getElementById(qtyId);
  const menuItem = input.closest(".menu-item");
  const title = menuItem.querySelector(".menu-item-title").innerText.trim();
  return title;
}

const TELEGRAM_BOT_TOKEN = '7661208917:AAH0zBGUeHHR3xi_K9NaOXFLvzHBC5Ccv5A';
const TELEGRAM_CHAT_ID = '-1002647443684';

function sendOrderToTelegram() {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  let orderNumber = localStorage.getItem('orderNumber');
  if (orderNumber === null) {
    orderNumber = 0;
  } else {
    orderNumber = parseInt(orderNumber);
    orderNumber = (orderNumber >= 1000) ? 0 : orderNumber + 1;
  }
  localStorage.setItem('orderNumber', orderNumber);

  const name = document.getElementById("custName").value.trim();

  let message = "";
  if (name !== "") {
    message += `👤Name: ${name}\n`;
  }
  message += `📝 Order #${orderNumber}\n\n`;

  let total = 0;
  cart.forEach((item, index) => {
    message += `${index + 1}. ${item.qty} x ${item.item} - ₹${item.qty * item.price}\n`;
    total += item.qty * item.price;
  });

  message += `\n ☘️Total: ₹${total}`;

  const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;

  fetch(url, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      chat_id: TELEGRAM_CHAT_ID,
      text: message,
      parse_mode: 'Markdown'
    })
  })
  .then(response => response.json())
  .then(data => {
    if (data.ok) {
      alert('Order sent to Telegram group!');
    } else {
      alert('Failed to send order: ' + data.description);
    }
  })
  .catch(error => {
    alert('Error sending order: ' + error.message);
  });
}
</script>
</body>
</html>
